[tool.poetry]
# required ones
name = "geoips"         # geoips package available at the root of the project
version = "0.0.0"   # this has to be fixed; it's dynamic in setuptools
description = "Geolocated Information Processing System"
authors = ["Tom <tom.jerry@colostate.edu>"]

# optional ones
maintainers = ["Tom <tom.jerry@colostate.edu>"]
#homepage = "set the url"   // optional
repository = "https://github.com/NRLMMD-GEOIPS/geoips"    #optional
#documentation = "set the url"      // optional
#license = {file = "LICENSE"}   // required
readme = "README.md"
keywords = ["GeoIPS", "Poetry"]
packages = [{include = "geoips"}]  # not needed as tool.poetry.name is properly set already
classifiers = [                # // list of PyPI trove classifiers to describe the project
    "Programming Language :: Python :: 3", ]

# uses current version .postN and not incrementing
[tool.poetry-dynamic-versioning]
enable = true
vcs = "git"
metadata = false    # don't include local-version hash; date doesn't appear by deafult
#style = "pep440"    # pep440 is deafult; can rmeove later on; used for : keeping 0.0.8 as the default install until 0.0.9 is out
style = "semver"
#tag-branch = "feature-poetry"
strict = true
pattern = "(?x)^((?P<epoch>\\d+)!)?(?P<base>\\d+(\\.\\d+)*)([-._]?((?P<stage>[a-zA-Z]+)[-._]?(?P<revision>\\d+)?))?(\\+(?P<tagged_metadata>.+))?$"
                         #           also: 3.6.0 incompatible with 0.20.3, but 0.21.0 works


[tool.poetry-dynamic-versioning.substitution]
files = ["*/_version.py"]


[build-system]
requires = ["poetry-core>=1.0.0", "poetry-dynamic-versioning>=1.0.0,<2.0.0"]
build-backend = "poetry_dynamic_versioning.backend"     # object used to perform the build process

[tool.poetry.dependencies]     # must download to run
    python = ">=3.9, <3.11"         # mandatory to declare the required python version
    matplotlib = "^3.7.2"           # Base requirement works, version specific to test outputs
    netcdf4 = "^1.6.4"              # Base requirement
    numpy = "^1.25.2"               # Base requirement
    pyresample = "^1.27.1"          # Base requirement Geospatial image resampling 
    				     	# efficiency improvements >= 1.22.3
    pyyaml = "^6.0.1"               # Base requirement 
    scipy = "^1.11.2"  	     # Base requirement, requires openblas 
    xarray = "^2023.7.0"            # Base requirement
    
    astropy = "^5.3.2"              # Used for accounting leap seconds when converting epoch timestamps
    cartopy = ">=0.22.0, *"         # No longer requires libgeos. 0.21 incompatible with geos 3.12
    ephem = "^4.1.4"                # Required for overpass predictor
    h5py = "^3.9.0"                 # hdf5 readers (GMI)
    isodate = "^0.6.1"              # Required for overpass predictor
    jsonschema = "^4.19.0"          # Provides validation for YAML plugins
    numexpr = "<2.8.5"              # for efficiency improvements
    psutil = "^5.9.5"               # Required for memory checks
    pyhdf = "^0.11.3"               # hdf4 readers (MODIS)
    pyaml-env = "^1.2.1"            # Reading YAML output config files, with paths
    pyorbital = "^1.8.0"            # required by satpy
    pypublicdecompwt = "^2.8.1.4"   # Required to read SEVIRI data
    #pyshp = "^2.3.1"		     # May be covered by cartopy ?	
    rasterio = "^1.3.8"             # GEOTIFF output
    referencing = "^0.30.2"
    requests = "^2.31.0"
    #    "scipy",  # Base requirement, requires openblas
    satpy = "^0.43.0"               # efficiency improvements >= 0.33.1
    scikit-image = "^0.21.0"        # Radius based center coverage checks
    #shapely = "^2.0.1"             # May be covered by cartopy. may not require libgeos
    


#[tool.poetry.dev-dependencies]
# nothing at this stage;

[tool.poetry.group.doc.dependencies]
pydata-sphinx-theme = "^0.13.3" # Required for building documentation
sphinx = "^7.2.2"               # Required for building documentation, v7.2 errors
sphinx-design = "^0.5.0"        # Required for building documentation


[tool.poetry.group.lint.dependencies]
bandit = "^1.7.5"   # Syntax/security checking
black = "^23.7.0"   # Syntax checking and reformatting
pylint = "^2.17.5"  # Syntax checking
flake8 = "^6.1.0"   # Syntax checking
flake8-rst-docstrings = "^0.3.0"    # numpy docstring checking
flake8-docstrings = "^1.7.0"    # docstring checking
flake8-rst = "^0.8.0"           # RST checking
prettier = "^0.0.7"             # YAML, JSON, etc linting
doc8 = "^1.1.1"                 # RST linting

[tool.poetry.group.test.dependencies]
pytest = "^7.4.0"		# Required for unit tests
pytest-cov = "^4.1.0"		# Reports on test coverage

[tool.poetry.group.debug.dependencies]
ipython = "^8.15.0"

[tool.poetry.plugins."geoips.plugin_packages"]
geoips = "geoips"

[tool.poetry.plugins."geoips.readers"]
abi_netcdf = "geoips.plugins.modules.readers.abi_netcdf"
abi_l2_netcdf = "geoips.plugins.modules.readers.abi_l2_netcdf"
ahi_hsd = "geoips.plugins.modules.readers.ahi_hsd"
amsr2_netcdf = "geoips.plugins.modules.readers.amsr2_netcdf"
amsr2_remss_winds_netcdf = "geoips.plugins.modules.readers.amsr2_remss_winds_netcdf"
amsub_hdf = "geoips.plugins.modules.readers.amsub_hdf"
amsub_mirs = "geoips.plugins.modules.readers.amsub_mirs"
atms_hdf5 = "geoips.plugins.modules.readers.atms_hdf5"
ewsg_netcdf = "geoips.plugins.modules.readers.ewsg_netcdf"
geoips_netcdf = "geoips.plugins.modules.readers.geoips_netcdf"
gmi_hdf5 = "geoips.plugins.modules.readers.gmi_hdf5"
imerg_hdf5 = "geoips.plugins.modules.readers.imerg_hdf5"
mimic_netcdf = "geoips.plugins.modules.readers.mimic_netcdf"
modis_hdf4 = "geoips.plugins.modules.readers.modis_hdf4"
saphir_hdf5 = "geoips.plugins.modules.readers.saphir_hdf5"
seviri_hrit = "geoips.plugins.modules.readers.seviri_hrit"
ascat_uhr_netcdf = "geoips.plugins.modules.readers.ascat_uhr_netcdf"
smap_remss_winds_netcdf = "geoips.plugins.modules.readers.smap_remss_winds_netcdf"
smos_winds_netcdf = "geoips.plugins.modules.readers.smos_winds_netcdf"
scat_knmi_winds_netcdf = "geoips.plugins.modules.readers.scat_knmi_winds_netcdf"
scat_noaa_winds_netcdf = "geoips.plugins.modules.readers.scat_noaa_winds_netcdf"
windsat_remss_winds_netcdf = "geoips.plugins.modules.readers.windsat_remss_winds_netcdf"
sar_winds_netcdf = "geoips.plugins.modules.readers.sar_winds_netcdf"
sfc_winds_text = "geoips.plugins.modules.readers.sfc_winds_text"
ssmi_binary = "geoips.plugins.modules.readers.ssmi_binary"
ssmis_binary = "geoips.plugins.modules.readers.ssmis_binary"
viirs_netcdf = "geoips.plugins.modules.readers.viirs_netcdf"
wfabba_ascii = "geoips.plugins.modules.readers.wfabba_ascii"
windsat_idr37_binary = "geoips.plugins.modules.readers.windsat_idr37_binary"

[tool.poetry.plugins."geoips.output_formats"]
full_disk_image = "geoips.plugins.modules.output_formatters.full_disk_image"
unprojected_image = "geoips.plugins.modules.output_formatters.unprojected_image"
geotiff_standard = "geoips.plugins.modules.output_formatters.geotiff_standard"
imagery_annotated = "geoips.plugins.modules.output_formatters.imagery_annotated"
imagery_clean = "geoips.plugins.modules.output_formatters.imagery_clean"
imagery_windbarbs = "geoips.plugins.modules.output_formatters.imagery_windbarbs"
imagery_windbarbs_clean = "geoips.plugins.modules.output_formatters.imagery_windbarbs_clean"
netcdf_geoips = "geoips.plugins.modules.output_formatters.netcdf_geoips"
netcdf_xarray = "geoips.plugins.modules.output_formatters.netcdf_xarray"
text_winds = "geoips.plugins.modules.output_formatters.text_winds"
metadata_default = "geoips.plugins.modules.output_formatters.metadata_default"
metadata_tc = "geoips.plugins.modules.output_formatters.metadata_tc"

[tool.poetry.plugins."geoips.algorithms"]
single_channel = "geoips.plugins.modules.algorithms.single_channel"
pmw_37pct = "geoips.plugins.modules.algorithms.pmw_tb.pmw_37pct"
pmw_89pct = "geoips.plugins.modules.algorithms.pmw_tb.pmw_89pct"
pmw_color37 = "geoips.plugins.modules.algorithms.pmw_tb.pmw_color37"
pmw_color89 = "geoips.plugins.modules.algorithms.pmw_tb.pmw_color89"
windbarbs = "geoips.plugins.modules.algorithms.sfc_winds.windbarbs"
Night_Vis_IR = "geoips.plugins.modules.algorithms.visir.Night_Vis_IR"
Night_Vis_IR_GeoIPS1 = "geoips.plugins.modules.algorithms.visir.Night_Vis_IR_GeoIPS1"
Night_Vis_GeoIPS1 = "geoips.plugins.modules.algorithms.visir.Night_Vis_GeoIPS1"
Night_Vis = "geoips.plugins.modules.algorithms.visir.Night_Vis"

[tool.poetry.plugins."geoips.procflows"]
single_source = "geoips.plugins.modules.procflows.single_source"
config_based = "geoips.plugins.modules.procflows.config_based"

[tool.poetry.plugins."geoips.sector_metadata_generators"]
tc_sector_file_parser = "geoips.plugins.modules.sector_metadata_generators.tc_sector_file_parser"
bdeck_parser = "geoips.plugins.modules.sector_metadata_generators.bdeck_parser"

[tool.poetry.plugins."geoips.sector_spec_generators"]
center_coordinates = "geoips.plugins.modules.sector_spec_generators.center_coordinates"

[tool.poetry.plugins."geoips.interpolators"]
interp_nearest = "geoips.plugins.modules.interpolators.pyresample_wrappers.interp_nearest"
interp_gauss = "geoips.plugins.modules.interpolators.pyresample_wrappers.interp_gauss"
interp_grid = "geoips.plugins.modules.interpolators.scipy_wrappers.interp_grid"



[tool.poetry.plugins."geoips.trackfile_parsers"]
flat_sectorfile_parser = "geoips.interface_modules.trackfile_parsers.flat_sectorfile_parser:flat_sectorfile_parser"
bdeck_parser = "geoips.interface_modules.trackfile_parsers.bdeck_parser:bdeck_parser"

[tool.poetry.plugins."geoips.area_def_generators"]
clat_clon_resolution_shape = "geoips.interface_modules.area_def_generators.clat_clon_resolution_shape:clat_clon_resolution_shape"

[tool.poetry.plugins."geoips.user_colormappers"]
cmap_rgb = "geoips.plugins.modules.colormappers.cmap_rgb"
matplotlib_linear_norm = "geoips.plugins.modules.colormappers.matplotlib_linear_norm"
pmw_150H = "geoips.plugins.modules.colormappers.pmw_tb.cmap_150H"
pmw_37H_Legacy = "geoips.plugins.modules.colormappers.pmw_tb.cmap_37H_Legacy"
pmw_37H_Physical = "geoips.plugins.modules.colormappers.pmw_tb.cmap_37H_Physical"
pmw_37H = "geoips.plugins.modules.colormappers.pmw_tb.cmap_37H"
pmw_37pct = "geoips.plugins.modules.colormappers.pmw_tb.cmap_37pct"
pmw_89H_Legacy = "geoips.plugins.modules.colormappers.pmw_tb.cmap_89H_Legacy"
pmw_89H_Physical = "geoips.plugins.modules.colormappers.pmw_tb.cmap_89H_Physical"
pmw_89H = "geoips.plugins.modules.colormappers.pmw_tb.cmap_89H"
pmw_89pct = "geoips.plugins.modules.colormappers.pmw_tb.cmap_89pct"
pmw_89HW = "geoips.plugins.modules.colormappers.pmw_tb.cmap_89HW"
pmw_Rain = "geoips.plugins.modules.colormappers.pmw_tb.cmap_Rain"
tpw_pwat = "geoips.plugins.modules.colormappers.tpw.tpw_pwat"
Infrared = "geoips.plugins.modules.colormappers.visir.Infrared"
IR_BD = "geoips.plugins.modules.colormappers.visir.IR_BD"
WV = "geoips.plugins.modules.colormappers.visir.WV"
wind_radii_transitions = "geoips.plugins.modules.colormappers.winds.wind_radii_transitions"

[tool.poetry.plugins."geoips.title_formatters"]
tc_standard = "geoips.plugins.modules.title_formats.tc_standard:tc_standard"
tc_copyright = "geoips.plugins.modules.title_formats.tc_copyright:tc_copyright"
static_standard = "geoips.plugins.modules.title_formats.static_standard:static_standard"

[tool.poetry.plugins."geoips.coverage_checks"]
masked_arrays = "geoips.interface_modules.coverage_checks.masked_arrays:masked_arrays"
numpy_arrays_nan = "geoips.interface_modules.coverage_checks.numpy_arrays_nan:numpy_arrays_nan"
center_radius = "geoips.interface_modules.coverage_checks.center_radius:center_radius"
center_radius_rgba = "geoips.interface_modules.coverage_checks.center_radius_rgba:center_radius_rgba"
rgba = "geoips.interface_modules.coverage_checks.rgba:rgba"
windbarbs = "geoips.interface_modules.coverage_checks.windbarbs:windbarbs"

[tool.poetry.plugins."geoips.output_comparisons"]
compare_outputs = "geoips.compare_outputs:compare_outputs"

[tool.poetry.plugins."geoips.filename_formatters"]
# formatting according to poetry needed; observe title_formatters plugin
geoips_fname = "geoips.plugins.modules.filename_formatters.geoips_fname"
geoips_netcdf_fname = "geoips.plugins.modules.filename_formatters.geoips_netcdf_fname"
geotiff_fname = "geoips.plugins.modules.filename_formatters.geotiff_fname"
tc_fname = "geoips.plugins.modules.filename_formatters.tc_fname"
tc_clean_fname = "geoips.plugins.modules.filename_formatters.tc_clean_fname"
text_winds_day_fname = "geoips.plugins.modules.filename_formatters.text_winds_day_fname"
text_winds_full_fname = "geoips.plugins.modules.filename_formatters.text_winds_full_fname"
text_winds_tc_fname = "geoips.plugins.modules.filename_formatters.text_winds_tc_fname"
metadata_default_fname = "geoips.plugins.modules.filename_formatters.metadata_default_fname"



[tool.poetry.scripts]
run_procflow = "geoips.commandline.run_procflow:main"
convert_trackfile_to_yaml = "geoips.commandline.convert_trackfile_to_yaml:main"
update_tc_tracks_database = "geoips.commandline.update_tc_tracks_database:main"
xml_to_yaml_sector = "geoips.commandline.xml_to_yaml_sector:main"
test_interfaces = "geoips.commandline.test_interfaces:main"
list_available_modules = "geoips.commandline.list_available_modules:main"
create_sector_image = "geoips.commandline.create_sector_image:main"


#[tool.setuptools.packages]
#find = {namespaces = false}
#
#[tool.setuptools.package-dir]
#"" = "."
#

# include non-python files with poetry

#[tool.setuptools.package-data]
#"*" = [
#    "*.txt",
#    "*.py",
#    "*.yaml",
#    "yaml_configs/*",
#    "yaml_configs/*/*",
#    "yaml_configs/*/*/*",
#    "image_utils/ascii_palettes/*",
#]
#

# do we need to distribute lock files along with the package
# package a need c.2 and package b need c.3 how does lock file takes care of it
# how to get custom entry points without making them available as command line scripts
